{"version":3,"sources":["modal.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["// create modal markup\r\n// <div class=\"modal\" id=\"uniqueModalID\" aria-label=\"Unique Modal Title\" aria-hidden=\"true\">\r\n// \t<div class=\"modal-content\">\r\n//\t\t<h1>Sample Modal Title</h1>\r\n//\t\t<span class=\"close-modal\" aria-label=\"Close Modal\">Ã—</span>\r\n// \t</div>\r\n// </div>\r\n// create modal link\r\n// <a class=\"open-modal\" href=\"#uniqueModalID\">Open Sample Modal</a>\r\n// OR to open a modal without moving its content in the dom\r\n// <a class=\"open-modal modal-inline\" href=\"#uniqueModalID\">Open Sample Modal</a>\r\njQuery(document).ready(function ($) {\r\n\r\n\t// global variables\r\n\tvar modalLink = undefined;\r\n\tvar modal;\r\n\tvar modalURL;\r\n\tvar modalID;\r\n\tvar modalCopy;\r\n\tvar modalFocus;\r\n\tvar modalHeight;\r\n\r\n\t// add overlay\r\n\t$('body').append('<div class=\"modal-overlay\" tabindex=\"-1\"></div>');\r\n\r\n\t// collect all modals\r\n\tvar modals = [];\r\n\t$('.modal').each(function () {\r\n\t\t$(this).attr('hidden', 'hidden').attr('role', 'dialog').attr('tabindex', '-1');\r\n\t\tmodals.push($(this).attr('id'));\r\n\t});\r\n\r\n\t// if url has hash for modal open that modal\r\n\tif (window.location.hash) {\r\n\t\tvar modalHash = window.location.hash.substr(1);\r\n\t\tif (jQuery.inArray(modalHash, modals) != '-1') {\r\n\t\t\tmodalURL = '#' + modalHash;\r\n\t\t\tmodalID = modalHash;\r\n\t\t\tmodalCopy = $(modalURL).clone();\r\n\t\t\tmodalHeight = $(modalURL).attr('data-modal-height');\r\n\t\t\tif (typeof modalHeight !== typeof undefined && modalHeight !== false) {\r\n\t\t\t\t$(modalURL).css({\r\n\t\t\t\t\theight: modalHeight + 'px',\r\n\t\t\t\t\t'min-height': 'calc(' + modalHeight + 'px - 40px)'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif ($(modalURL).hasClass('modal-inline')) {\r\n\t\t\t\t$(modalURL).parent().addClass('modal-inline-parent');\r\n\t\t\t\t$('html, body').toggleClass('modal-open');\r\n\t\t\t\t$('.modal-overlay').toggleClass('show-modal modal-inline');\r\n\t\t\t\t$(modalURL).toggleClass('show-modal');\r\n\t\t\t\t$(modalURL).removeAttr('hidden').attr('aria-hidden', 'false').attr('tabindex', '0');\r\n\t\t\t\t$('.modal-content .close-modal').addClass('modal-inline').attr('tabindex', '0');\r\n\t\t\t\t$(modalURL).focus();\r\n\t\t\t\tmodalFocus = $(modalURL + ' > .modal-content');\r\n\t\t\t\tfocusable(modalFocus);\r\n\t\t\t} else {\r\n\t\t\t\tmodalCopy = $(modalURL).clone();\r\n\t\t\t\t$(modalURL).replaceWith('<span data-modalid=\"' + modalID + '\" aria-hidden=\"true\" hidden></span>');\r\n\t\t\t\tmodal(modalURL);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t$(document).on('click', '.open-modal', function (e) {\r\n\t\te.preventDefault();\r\n\t\t// set variables\r\n\t\tmodalLink = $(this);\r\n\t\tmodalURL = $(this).attr('href');\r\n\t\tmodalID = modalURL.replace(/^#/, '');\r\n\t\tmodalHeight = $(modalURL).attr('data-modal-height');\r\n\r\n\t\t// open modal if it exists in modals array\r\n\t\tif (jQuery.inArray(modalID, modals) != '-1') {\r\n\t\t\tif (typeof modalHeight !== typeof undefined && modalHeight !== false) {\r\n\t\t\t\t$(modalURL).css({\r\n\t\t\t\t\theight: modalHeight + 'px',\r\n\t\t\t\t\t'min-height': 'calc(' + modalHeight + 'px - 40px)'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif ($(modalLink).hasClass('modal-inline')) {\r\n\t\t\t\t$(modalURL).parent().addClass('modal-inline-parent');\r\n\t\t\t\t$('html, body').toggleClass('modal-open');\r\n\t\t\t\t$('.modal-overlay').insertAfter(modalURL).toggleClass('show-modal modal-inline');\r\n\t\t\t\t$(modalURL).toggleClass('show-modal');\r\n\t\t\t\t$(modalURL).removeAttr('hidden').attr('aria-hidden', 'false').attr('tabindex', '0');\r\n\t\t\t\t$('.close-modal', modalURL).addClass('modal-inline').attr('tabindex', '0');\r\n\t\t\t\t$(modalURL).focus();\r\n\t\t\t\tmodalFocus = $(modalURL + ' > .modal-content');\r\n\t\t\t\tfocusable(modalFocus);\r\n\t\t\t} else {\r\n\t\t\t\tmodalCopy = $(modalURL).clone();\r\n\t\t\t\t$(modalURL).replaceWith('<span data-modalid=\"' + modalID + '\" aria-hidden=\"true\" hidden></span>');\r\n\t\t\t\tmodal(modalURL);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// modal\r\n\tfunction modal() {\r\n\t\t$('.modal-overlay').after(modalCopy);\r\n\t\t$('html, body').toggleClass('modal-open');\r\n\t\t$('.modal-overlay').toggleClass('show-modal');\r\n\t\t$(modalURL).toggleClass('show-modal');\r\n\t\t$(modalURL).removeAttr('hidden').attr('aria-hidden', 'false').attr('tabindex', '0');\r\n\t\t$('.modal-content .close-modal').attr('tabindex', '0');\r\n\t\t$(modalURL).focus();\r\n\t\tmodalFocus = $(modalURL + ' > .modal-content');\r\n\t\tfocusable(modalFocus);\r\n\t}\r\n\r\n\t// find focusable items\r\n\tfunction focusable() {\r\n\t\tvar modalFocusable = $('span.close-modal, a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]', modalFocus);\r\n\t\tvar modalFocusableFirst = modalFocusable.first();\r\n\t\tvar modalFocusableLast = modalFocusable.last();\r\n\t\tmodalFocusableLast.on('keydown', function (e) {\r\n\t\t\tif ((e.which === 9 && !e.shiftKey)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tmodalFocusableFirst.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodalFocusableFirst.on('keydown', function (e) {\r\n\t\t\tif ((e.which === 9 && e.shiftKey)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tmodalFocusableLast.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// focus to modal content\r\n\t$(document).keydown(function (e) {\r\n\t\tif ($(e.target).is('.modal')) {\r\n\t\t\tif (e.keyCode === 9) {\r\n\t\t\t\tmodalFocus = $(modalURL + ' > .modal-content');\r\n\t\t\t\tfocusable(modalFocus);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// close when clicking overlay / outside of modal window\r\n\t$('.modal-overlay').on('click', function () {\r\n\t\t$('html, body').removeClass('modal-open');\r\n\t\t$(this).removeClass('show-modal');\r\n\t\tif (!$(this).hasClass('modal-inline')) {\r\n\t\t\tmodalCopy.remove();\r\n\t\t\t$('span[data-modalid=\"' + modalID + '\"]').replaceWith(modalCopy);\r\n\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\t\t\t$('.modal').removeClass('show-modal');\r\n\t\t} else {\r\n\t\t\t// modalCopy.remove();\r\n\t\t\t$(modalURL).parent().removeClass('modal-inline-parent');\r\n\t\t\t$(modalURL).removeClass('show-modal');\r\n\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\t\t}\r\n\t\tif (modalLink !== undefined) {\r\n\t\t\t// modalCopy.remove();\r\n\t\t\tmodalLink.focus();\r\n\t\t\tmodalLink = undefined;\r\n\t\t}\r\n\t});\r\n\r\n\t// dont close modal if clicking anything but close button\r\n\t$('.modal-content *:not(.close-modal)').on('click', function (e) {\r\n\t\te.stopPropagation();\r\n\t});\r\n\r\n\t// close modal with button\r\n\t$(document).on('click', '.close-modal', function () {\r\n\t\t$('html, body').removeClass('modal-open');\r\n\t\t$('.modal-overlay').removeClass('show-modal');\r\n\t\tif (!$(this).hasClass('modal-inline')) {\r\n\t\t\tmodalCopy.remove();\r\n\t\t\t$('span[data-modalid=\"' + modalID + '\"]').replaceWith(modalCopy);\r\n\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\t\t\t$('.modal').removeClass('show-modal');\r\n\t\t} else {\r\n\t\t\t$(modalURL).parent().removeClass('modal-inline-parent');\r\n\t\t\t$(modalURL).removeClass('show-modal');\r\n\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\r\n\t\t}\r\n\t\tif (modalLink != undefined) {\r\n\t\t\t// modalCopy.remove();\r\n\t\t\tmodalLink.focus();\r\n\t\t\tmodalLink = undefined;\r\n\t\t}\r\n\t});\r\n\r\n\t// close modal if close is focused and enter key pressed\r\n\t// focus to modal content\r\n\t$(document).keydown(function (e) {\r\n\t\tif ($(e.target).is('.close-modal')) {\r\n\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t$('html, body').removeClass('modal-open');\r\n\t\t\t\t$('.modal-overlay').removeClass('show-modal');\r\n\t\t\t\tif (!$('.modal-overlay').hasClass('modal-inline')) {\r\n\t\t\t\t\tmodalCopy.remove();\r\n\t\t\t\t\t$('span[data-modalid=\"' + modalID + '\"]').replaceWith(modalCopy);\r\n\t\t\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\t\t\t\t\t$('.modal').removeClass('show-modal');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(modalURL).parent().removeClass('modal-inline-parent');\r\n\t\t\t\t\t$(modalURL).removeClass('show-modal');\r\n\t\t\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\t\t\t\t}\r\n\t\t\t\tif (modalLink !== undefined) {\r\n\t\t\t\t\tmodalLink.focus();\r\n\t\t\t\t\tmodalLink = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// close modal with escape key\r\n\t$(document).on('keyup', function (e) {\r\n\t\tif (e.keyCode === 27) {\r\n\t\t\te.preventDefault();\r\n\t\t\tif ($('body').hasClass('modal-open')) {\r\n\t\t\t\t$('html, body').removeClass('modal-open');\r\n\t\t\t\t$('.modal-overlay').removeClass('show-modal');\r\n\t\t\t\tif (!$('.modal-overlay').hasClass('modal-inline')) {\r\n\t\t\t\t\tmodalCopy.remove();\r\n\t\t\t\t\t$('span[data-modalid=\"' + modalID + '\"]').replaceWith(modalCopy);\r\n\t\t\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\t\t\t\t\t$('.modal').removeClass('show-modal');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(modalURL).parent().removeClass('modal-inline-parent');\r\n\t\t\t\t\t$(modalURL).removeClass('show-modal');\r\n\t\t\t\t\t$(modalURL).attr('hidden', 'hidden').attr('aria-hidden', 'true').attr('tabindex', '-1');\r\n\t\t\t\t}\r\n\t\t\t\tif (modalLink !== undefined) {\r\n\t\t\t\t\tmodalLink.focus();\r\n\t\t\t\t\tmodalLink = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});","$(function () {\r\n  // save settings\r\n  $('#save').on('click', function () {\r\n    var services = [];\r\n    $.each($('input[name=\"service\"]:checked'), function () {\r\n      services.push({\r\n        id: $(this).val(),\r\n        title: $(this).attr('data-title'),\r\n        logo: $(this).attr('data-logo'),\r\n        url: $(this).attr('data-url'),\r\n        background: $(this).attr('data-background')\r\n      });\r\n    });\r\n    if ($('input[id=\"rememberRecent\"]').is(':checked')) {\r\n      localStorage.setItem('vidhubServicesRememberRecent', 'show');\r\n    } else {\r\n      localStorage.removeItem('vidhubServicesRememberRecent');\r\n    }\r\n    localStorage.setItem('vidhubServices', JSON.stringify(services));\r\n    refreshPage();\r\n  });\r\n  $('#clear').on('click', function () {\r\n    localStorage.removeItem('vidhubServices');\r\n    localStorage.removeItem('vidhubServicesRememberRecent');\r\n    localStorage.removeItem('vidhubServicesLastViewed');\r\n    refreshPage();\r\n  });\r\n  function refreshPage() {\r\n    window.location.reload();\r\n  }\r\n  function vidhubServices() {\r\n    var vidhubServicesJSON;\r\n    var vidhubServices;\r\n    // var services;\r\n    if (localStorage.getItem('vidhubServices') === null) {\r\n      $.ajax({\r\n        url: '/services.json',\r\n        dataType: 'text',\r\n        success: function (data) {\r\n          vidhubServicesJSON = JSON.parse(data);\r\n          for (var i = 0; i < vidhubServicesJSON.length; ++i) {\r\n            // services\r\n            $('.services').append('<div><span class=\"service ' + vidhubServicesJSON[i].title + '\" href=\"#\" data-title=\"' + vidhubServicesJSON[i].title + '\" data-url=\"' + vidhubServicesJSON[i].url + '\" aria-label=\"' + vidhubServicesJSON[i].title + '\" style=\"' + vidhubServicesJSON[i].background + '\"><span class=\"logo\" style=\"background-image:url(' + vidhubServicesJSON[i].logo + ')\"></span></span></div>');\r\n            // services checkboxes\r\n            $('.services-list').append('<div class=\"sm-full sm-last\"><input type=\"checkbox\" id=\"' + vidhubServicesJSON[i].id + '\" data-title=\"' + vidhubServicesJSON[i].title + '\" data-logo=\"' + vidhubServicesJSON[i].logo + '\" data-url=\"' + vidhubServicesJSON[i].url + '\" data-background=\"' + vidhubServicesJSON[i].background + '\" value=\"' + vidhubServicesJSON[i].id + '\" name=\"service\"><label for=\"' + vidhubServicesJSON[i].id + '\">' + vidhubServicesJSON[i].title + '</label></div>');\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      vidhubServices = localStorage.getItem('vidhubServices');\r\n      vidhubServicesRememberRecent = localStorage.getItem('vidhubServicesRememberRecent');\r\n      vidhubServicesLocal = JSON.parse(vidhubServices);\r\n      $.ajax({\r\n        url: '/services.json',\r\n        dataType: 'text',\r\n        success: function (data) {\r\n          vidhubServicesJSON = JSON.parse(data);\r\n          for (var i = 0; i < vidhubServicesJSON.length; ++i) {\r\n            // services checkboxes\r\n            $('.services-list').append('<div class=\"sm-full sm-last\"><input type=\"checkbox\" id=\"' + vidhubServicesJSON[i].id + '\" data-title=\"' + vidhubServicesJSON[i].title + '\" data-logo=\"' + vidhubServicesJSON[i].logo + '\" data-url=\"' + vidhubServicesJSON[i].url + '\" data-background=\"' + vidhubServicesJSON[i].background + '\" value=\"' + vidhubServicesJSON[i].id + '\" name=\"service\"><label for=\"' + vidhubServicesJSON[i].id + '\">' + vidhubServicesJSON[i].title + '</label></div>');\r\n          }\r\n          selectedServices();\r\n        }\r\n      });\r\n      if (vidhubServicesRememberRecent === 'show') {\r\n        $('input[id=\"rememberRecent\"]').prop(\"checked\", true);\r\n      } else {\r\n        $('input[id=\"rememberRecent\"]').prop(\"checked\", false);\r\n      }\r\n    }\r\n  }\r\n  function selectedServices() {\r\n    for (var i = 0; i < vidhubServicesLocal.length; ++i) {\r\n      // services\r\n      $('.services').append('<div><span class=\"service ' + vidhubServicesLocal[i].title + '\" href=\"#\" aria-label=\"' + vidhubServicesLocal[i].title + '\" data-title=\"' + vidhubServicesLocal[i].title + '\" data-url=\"' + vidhubServicesLocal[i].url + '\" style=\"' + vidhubServicesLocal[i].background + '\"><span class=\"logo\" style=\"background-image:url(' + vidhubServicesLocal[i].logo + ')\"></span></span></div>');\r\n      // services checkboxes\r\n      $('.services-list input[type=\"checkbox\"]' + '#' + vidhubServicesLocal[i].id).prop(\"checked\", true);\r\n    }\r\n  }\r\n  // store last viewed\r\n  function lastView() {\r\n    $('body').on('click', '.services .service', function () {\r\n      var vidhubServiceURL = $(this).attr('data-url');\r\n      var vidhubServicesLastViewed = [];\r\n      vidhubServicesLastViewed.push({\r\n        title: $(this).attr('data-title'),\r\n        url: $(this).attr('data-url')\r\n      });\r\n      localStorage.setItem('vidhubServicesLastViewed', JSON.stringify(vidhubServicesLastViewed));\r\n      window.location.href = vidhubServiceURL;\r\n    });\r\n\r\n    vidhubServicesLastViewed = localStorage.getItem('vidhubServicesLastViewed');\r\n    if (vidhubServicesLastViewed !== null) {\r\n      $('.last-viewed').show();\r\n      vidhubServicesLastViewedLocal = JSON.parse(vidhubServicesLastViewed);\r\n      for (var i = 0; i < vidhubServicesLastViewedLocal.length; ++i) {\r\n        $('.last-viewed').append('<a href=\"' + vidhubServicesLastViewedLocal[i].url + '\">' + vidhubServicesLastViewedLocal[i].title + '</a>');\r\n      }\r\n    }\r\n  }\r\n  // reload on back button\r\n  window.addEventListener(\"pageshow\", function (event) {\r\n    var historyTraversal = event.persisted ||\r\n      (typeof window.performance !== \"undefined\" &&\r\n        window.performance.navigation.type === 2);\r\n    if (historyTraversal) {\r\n      // Handle page restore.\r\n      window.location.reload();\r\n    }\r\n  });\r\n  vidhubServices();\r\n  lastView();\r\n});"]}